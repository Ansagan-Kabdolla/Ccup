<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Modern Restaurant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'restoran/css/style.min.css' %}">
    <link rel="stylesheet" href="{% static 'restoran/css/normalize.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Gentium+Book+Basic:wght@400;700&family=Lato:wght@100;400;700&family=Open+Sans:wght@400;700&family=Yeseva+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,700;1,300;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'restoran/libs/aos.css' %}">
    <script src="{% static 'restoran/libs/jquery.min.js' %}"></script>
    <script src="{% static 'restoran/libs/aos.js' %}"></script>
    <script src="https://kit.fontawesome.com/003b636a5f.js" crossorigin="anonymous"></script>
</head>

<body>
    <a href="#" class="swipe_btn"><i class="fas fa-angle-up"></i></a>
    <header class="header">
        <div class="container header_container">
            <a href="#" class="logo"><img src="{% static 'restoran/img/logo.png' %}" alt="LOGO" class="logo_img">
            </a>
            <nav>
                <ul class="menu">
                    <li class="menu_item menu_item_active"><a href="#">Home</a></li>
                    <li class="menu_item"><a href="#about">About</a></li>
                    <li class="menu_item"><a href="#ingridients">Ingredients</a></li>
                    <li class="menu_item"><a href="#rmenu">Menu</a></li>
                    <li class="menu_item"><a href="#review">Reviews</a></li>
                    <li class="menu_item"><a href="#contact">Reservations</a></li>
                </ul>
            </nav>
            <div class="soc_net">
                <a href="#">
                    <div class="soc_net_item soc_net_item2"><i class="fab fa-twitter sn_img"></i></div>
                </a>
                <a href="#">
                    <div class="soc_net_item soc_net_item1"><i class="fab fa-facebook-f sn_img"></i></div>
                </a>
                <a href="#">
                    <div class="soc_net_item soc_net_item3"><i class="fab fa-youtube"></i></div>
                </a>
            </div>
            <div class="header_card">
                <a href="" class="header_card_link"><i class="fas fa-shopping-cart header_card_linkk"></i></a>
                <div class="basket_drop">
                    <div class="basket_item_area"></div>
                    <div class="basket_totalPrice">
                        <p class="total">TOTAL</p>
                        <p class="price"><span>0</span> $</p>
                    </div>
                    <!--                    <a href="#" class="basket_btn checkout">CHECKOUT</a>-->
                    <a href="#" class="basket_btn go">GO TO CARD</a>
                </div>
            </div>
        </div>
    </header>
    <div class="home" id="home">
        <div class="container home_container">
            <p class="home_title">A modern means of buying food</p>
            <div class="home_dec">
                <img src="{% static 'restoran/img/Decoration.png' %}" alt="Dec">
            </div>
            <div class="home_btn_area">
                <a href="#contact" class="home_btn">BOOK A TABLE</a>
                <a href="#rmenu" class="home_btn">SEE THE MENU</a>
            </div>
        </div>
    </div>

    <div class="about" id="about">
        <div class="container about_container">
            <div class="about_content" data-aos="fade-right">
                <h3 class="about_content_title">
                    Just the right food
                </h3>
                <img src="{% static 'restoran/img/Divider.png' %}" alt="decor" class="about_content_decor">
                <p class="about_content_desc">If you’ve been to one of our restaurants, you’ve seen – and tasted – what keeps our customers coming back for more. Perfect materials and freshly baked food, delicious Lambda cakes, muffins, and gourmet coffees make us hard to resist! Stop in today and check us out!</p>
                <img src="{% static 'restoran/img/cook.png' %}" alt="cook" class="about_content_cook">
            </div>
            <img src="{% static 'restoran/img/dish.png' %}" alt="DDD" class="about_content_dish">
        </div>
    </div>

    <div class="ingridients" id="ingridients">
        <div class="container ingridients_container">
            <div class="ingridients_content_area" data-aos="fade-left"></div>
            <div class="ingridients_content" data-aos="fade-left">
                <h3 class="ingridients_content_title">Fine ingredients</h3>
                <img src="{% static 'restoran/img/iDivider.png' %}" alt="ddd" class="decor ingridients_content_decor">
                <p class="ingridients_content_desc">Visiting our restaurant you will not worry about the quality and freshness of the ingredients. We use the highest quality products and grown just yesterday. We are very careful about the client and his needs.
                </p>
                <div class="ingridients_content_el">
                    <img src="{% static 'restoran/img/i1.png' %}" alt="1">
                    <img src="{% static 'restoran/img/i2.png' %}" alt="2">
                    <img src="{% static 'restoran/img/i3.png' %}" alt="2">
                </div>
            </div>
        </div>
    </div>

    <div class="rmenu" id="rmenu">
        <div class="container rmenu_container">
            <!--
            <div class="rmenu_search_area">
                <input type="text" class="rmenu_search" placeholder="search dishes">
                <a href="#" class="rmenu_search_btn">
                    <i class="fas fa-search"></i>
                </a>
            </div>
-->
            <div class="rmenu_content">
                <div class="left">
                    {% for category in left_categories %}
                    <div class="rmenu_content_item">
                        <h3 class="about_content_title rmenu_content_title">
                            {{ category.name }}
                        </h3>
                        <img src="{% static 'restoran/img/Divider.png' %}" alt="decor" class="about_content_decor rmenu_content_decor">
                        {% for food in category.food_set.all %}
                        <div class="rmenu_content_item_block clearfix" data-id="{{food.pk}}" data-price="{{food.price}}">
                            <h3 class="title clearfix">{{ food.name }}</h3>
                            <span class="price clearfix">{{ food.price }}</span>
                            <hr>
                            <p class="desc clearfix">Pureed eggplant, garlic, green pepper and tomato dip.</p>
                            <a href="#" class="rmenu_content_item_btn" data-id="{{food.id}}">Add to card</a>
                        </div>
                        {% endfor %}
                    </div>
                    {% endfor %}
                </div>
                <div class="right">
                    {% for category in right_categories %}
                    <div class="rmenu_content_item">
                        <h3 class="about_content_title rmenu_content_title">
                            {{ category.name }}
                        </h3>
                        <img src="{% static 'restoran/img/Divider.png' %}" alt="decor" class="about_content_decor rmenu_content_decor">
                        {% for food in category.food_set.all %}
                        <div class="rmenu_content_item_block clearfix" data-id="{{food.pk}}" data-price="{{food.price}}" >
                            <h3 class="title clearfix">{{ food.name }}</h3>
                            <span class="price clearfix">{{ food.price }}</span>
                            <hr>
                            <p class="desc clearfix">Pureed eggplant, garlic, green pepper and tomato dip.</p>
                            <a href="#" class="rmenu_content_item_btn" data-id="{{food.id}}">Add to card</a>
                        </div>
                        {% endfor %}
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <div class="review" id="review">
        <div class="container review_container">
            <div class="review_content_area" data-aos="fade-up"></div>
            <div class="review_content" data-aos="fade-up">
                <img src="{% static 'restoran/img/kav.png' %}" alt="KAV" class="review_content_kav">
                <div class="review_content_text">
                    <h3 class="ingridients_content_title review_content_title">Guest Reviews</h3>
                    <img src="{% static 'restoran/img/iDivider.png' %}" alt="ddd" class="decor ingridients_content_decor review_content_decor">
                    <p class="review_content_desc">I was at this restaurant a couple of times with my husband. An excellent institution, the staff is nice, helpful and polite, it seems to me it is very important today. The kitchen is on the level, I advise everyone. I can’t wait to remove the isolation and my husband and I will go there the first weekend to meet with friends. We also ordered food delivery from the restaurant. Of course, this is not the case there, sitting in the restaurant, but still everything is delicious.
                    </p>
                    <span class="review_content_author">- food inc, New York</span>
                </div>
            </div>
        </div>
    </div>

    <div class="contact" id="contact">
        <div class="container contact_container">
            <div class="contact_img">
                <img src="{% static 'restoran/img/image2.png' %}" alt="IMG" class="contact_image">
                <img src="{% static 'restoran/img/image.png' %}" alt="IMG" class="contact_image">
            </div>
            <div class="contact_content">
                <h3 class="about_content_title contact_content_title">
                    Book table right now!
                </h3>
                <img src="{% static 'restoran/img/Divider.png' %}" alt="decor" class="about_content_decor contact_content_decor">
                <p class="contact_content_desc">When you visit one of our restaurants, you will see - and try something - that makes our customers come back again. Great materials and freshly baked food.
                    <br><br>
                    Delicious Lambda cakes, muffins, and gourmet coffees make us hard to resist! Stop in today and check us out! Perfect materials and freshly baked food.</p>

                <form action="#" class="contact_content_form">
                    <div class="contact_content_form_inputArea">
                        <div class="contact_content_form_item">
                            <label for="contact_content_form_name">Name</label>
                            <input type="text" id="contact_content_form_name" class="contact_content_form_input contact_content_form_name" placeholder="your name *">
                        </div>
                        <div class="contact_content_form_item">
                            <label for="contact_content_form_email">Email</label>
                            <input type="text" id="contact_content_form_email" class="contact_content_form_input contact_content_form_name" placeholder="your email *">
                        </div>
                        <div class="contact_content_form_item">
                            <label for="contact_content_form_number">Number</label>
                            <input type="tel" id="contact_content_form_number" class="contact_content_form_input contact_content_form_name" placeholder="party number" pattern="8[0-9]{3} [0-9]{3}[0-9]{4}">
                        </div>
                        <div class="contact_content_form_item">
                            <label for="contact_content_form_date">Date</label>
                            <input type="date" id="contact_content_form_date" class="contact_content_form_input contact_content_form_name" placeholder="date *">
                        </div>
                        <div class="contact_content_form_item">
                            <label for="contact_content_form_time">Time</label>
                            <input type="time" name="" list="list" step="1800" id="contact_content_form_time" class="contact_content_form_input contact_content_form_name" placeholder="party number">
                            <datalist id="list">
                                <option value="08:00"></option>
                                <option value="09:00"></option>
                                <option value="10:00"></option>
                                <option value="11:00"></option>
                                <option value="12:00"></option>
                                <option value="13:00"></option>
                                <option value="14:00"></option>
                                <option value="15:00"></option>
                                <option value="16:00"></option>
                                <option value="17:00"></option>
                                <option value="18:00"></option>
                                <option value="19:00"></option>
                                <option value="20:00"></option>
                                <option value="21:00"></option>
                                <option value="22:00"></option>
                                <option value="23:00"></option>
                            </datalist>
                        </div>
                        <div class="contact_content_form_item">
                            <label for="contact_content_form_type">Type</label>
                            <select type="text" id="contact_content_form_type" class="contact_content_form_input">
                                <option id="Table">Table</option>
                                <option id="Delivery">Delivery</option>
                                <option id="Takeaway">Takeaway</option>
                            </select>
                        </div>
                    </div>
                    <select name="foods" id="select_dishes" multiple="multiple"></select>
                    <a href="#" class="contact_content_form_btn">Book now!</a>
                </form>
            </div>
        </div>
    </div>

    <footer class="footer" id="footer">
        <div class="container footer_container">
            <div class="footer_content">
                <div class="footer_content_item footer_content_item_left">
                    <h3 class="ingridients_content_title footer_content_title">About us</h3>
                    <img src="{% static 'restoran/img/iDivider.png' %}" alt="ddd" class="decor ingridients_content_decor footer_content_decor">
                    <p class="footer_content_desc">
                        Lambda's new and expanded Kokshetau location represents a truly authentic <span>Kazakh</span> patisserie, featuring breakfasts of fresh croissants and steaming bowls of café. Lamda the best restaurant in town</p>
                </div>

                <div class="footer_content_item footer_content_middle">
                    <h3 class="ingridients_content_title footer_content_title">Opening Hours</h3>
                    <img src="{% static 'restoran/img/iDivider.png' %}" alt="ddd" class="decor ingridients_content_decor footer_content_decor">
                    <p class="footer_content_desc"><span>Mon-Thu:</span> 7:00am-8:00pm</p>
                    <p class="footer_content_desc"><span>Fri-Sun:</span> 7:00am-10:00pm</p>
                    <div class="footer_content_item_bank">
                        <i class="fab fa-cc-visa footer_content_item_bankItem"></i>
                        <i class="fab fa-cc-apple-pay footer_content_item_bankItem"></i>
                        <i class="fab fa-cc-mastercard footer_content_item_bankItem"></i>
                        <i class="fab fa-cc-paypal footer_content_item_bankItem"></i>
                    </div>
                </div>

                <div class="footer_content_item footer_content_item_right">
                    <h3 class="ingridients_content_title footer_content_title">Our Location</h3>
                    <img src="{% static 'restoran/img/iDivider.png' %}" alt="ddd" class="decor ingridients_content_decor footer_content_decor">
                    <p class="footer_content_desc"><span>Abaya street 156A <br>Akana Seri street 125</span></p>
                    <div class="soc_net footer_content_soc_net">
                        <a href="#">
                            <div class="soc_net_item soc_net_item2"><i class="fab fa-twitter sn_img"></i></div>
                        </a>
                        <a href="#">
                            <div class="soc_net_item soc_net_item1"><i class="fab fa-facebook-f sn_img"></i></div>
                        </a>
                        <a href="#">
                            <div class="soc_net_item soc_net_item3"><i class="fab fa-youtube"></i></div>
                        </a>
                        <a href="#">
                            <div class="soc_net_item soc_net_item3"><i class="fab fa-trello"></i></div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        'use strict'

$('.main_btn').on("click", function (e) {
    e.preventDefault();
});

$('a').on("click", function (e) {
    e.preventDefault();
});

$('.swipe_btn').click(function () {
    $("html, body").animate({
        scrollTop: 0
    }, 500);
    return false;
});

$('a[href*="#"]').on('click', function (e) {
    $('html,body').animate({
        scrollTop: $($(this).attr('href')).offset().top + 3
    }, 1200);
});

$(".header_card_link").on("click", function (e) {
    e.preventDefault();
    $(".basket_drop").fadeToggle();
});

$(document).on('scroll', function () {
    var scrollBtn = $(this).scrollTop();

    if (scrollBtn >= 120) {
        $(".header_card").addClass("fixed");
        $(".header").addClass("fixed");
        $(".header_card").addClass("fixed");
    } else {
        $(".header_card").removeClass("fixed");
        $(".header").removeClass("fixed");
        $(".header_card").removeClass("fixed");
    }

    if (scrollBtn >= 500) {
        $(".swipe_btn").fadeIn(400);
    } else {
        $(".swipe_btn").fadeOut(400);
    }
});

AOS.init({
    // Global settings:
    disable: false, // accepts following values: 'phone', 'tablet', 'mobile', boolean, expression or function
    startEvent: 'DOMContentLoaded', // name of the event dispatched on the document, that AOS should initialize on
    initClassName: 'aos-init', // class applied after initialization
    animatedClassName: 'aos-animate', // class applied on animation
    useClassNames: false, // if true, will add content of `data-aos` as classes on scroll
    disableMutationObserver: false, // disables automatic mutations' detections (advanced)
    debounceDelay: 50, // the delay on debounce used while resizing window (advanced)
    throttleDelay: 99, // the delay on throttle used while scrolling the page (advanced)


    // Settings that can be overridden on per-element basis, by `data-aos-*` attributes:
    offset: 100, // offset (in px) from the original trigger point
    delay: 3, // values from 0 to 3000, with step 50ms
    duration: 1500, // values from 0 to 3000, with step 50ms
    easing: 'ease', // default easing for AOS animations
    once: true, // whether animation should happen only once - while scrolling down
    mirror: false, // whether elements should animate out while scrolling past them
    anchorPlacement: 'top-bottom' // defines which position of the element regarding to window should trigger the animation

});

$(window).scroll(function () {
    var st = $(this).scrollTop();
    $(".about_content_dish").css({
        "transform": "translate(0%, - " +
            st / 80 + "%)"
    });
});
var json = new XMLHttpRequest();
json.open('GET', "{% static 'restoran/js/data_file.json' %}", true);
console.log(json);
json.send();
json.onreadystatechange = function () {
    if (json.readyState === 4 && json.status === 200) {
        console.log("state = 4");

        var basketCard = JSON.parse(json.responseText);

        var amount = 0;
        $(".price span").text(+amount.toFixed(2));

        ////////////////////////////////////////////


        var basket_area = $(".basket_item_area");
        var select_dishes_area = $("#select_dishes");
        var countGoods = 0;
        var cardItems = [];
        basket_area.append("<p class = 'basket_empty'>Корзина пуста</p>");
        $(".price span").text(+amount.toFixed(2));

        var renderItemList = function (count) {
            basket_area.empty();
            select_dishes_area.empty();
            var index = 0;
            if (cardItems.length > 5) {
                $(".basket_item_area").css({
                    "height": "270px",
                    "overflow": "scroll",
                    "overflow-x": "hidden"
                });
            } else {
                $(".basket_item_area").css({
                    "height": "auto",
                    "overflow": "hidden",
                    "overflow-x": "hidden"
                });
            }

            for (var itemKey of cardItems) {
                var basket_item = $("<div/>", {
                    class: "basket_item",
                    id: itemKey.id
                });

                var select_dishes_item = $("<option/>", {
                    id: itemKey.id,
                    text: itemKey.id,
                    value: itemKey.id
                });

                select_dishes_item.attr("selected", "selected");

                var basket_item_title = "<h4 class = 'basket_item_title'>" + itemKey.title + "</h4>";

                var basket_item_price = "<p class='basket_item_price'><span class='basket_item_count'>" + itemKey.count + "</span> x <span class = 'basket_item_price4one'>" +
                    (itemKey.priceOne).toFixed(2) + "</span></p>";
                var delete_btn = "<a href=' ' class = 'basket_item_delete' data-index = " + index + " id = '" + itemKey.id + "'><i class='fas fa-times-circle basket_item_remove'></i></a>";

                $(".price span").empty();
                $(".price span").text(+amount.toFixed(2));
                index++;

                select_dishes_area.append(select_dishes_item);
                basket_item.append(basket_item_title);
                basket_item.append(basket_item_price);
                basket_item.append(delete_btn);
                basket_area.append(basket_item);
            }
        };

        var idNot = 0;
        var add = function (id, title, price) {
            var id = id;
            var title = title;
            var price = price;
            var priceOne = price;
            var count = 1;
            var idItems = [];

            idItems.push(id);

            var basketItem = {
                "id": id,
                "title": title,
                "price": price,
                "priceOne": price,
                "count": 1
            };
            for (var i = 0; i < cardItems.length; i++) {
                if (cardItems[i].id === id) {
                    basketItem.count = cardItems[i].count;
                    basketItem.price = cardItems[i].priceOne;
                    basketItem.priceOne += basketItem.price;
                    basketItem.count++;
                    cardItems.splice(i, 1);
                }
            }
            countGoods++;
            amount += price;
            cardItems.push(basketItem);
            renderItemList();

            idNot = Math.floor(Math.random() * 5000);
            addNot(idNot, title);
            $("#added-" + idNot).fadeOut(2000);

            if (cardItems.length > 0) {
                $(".basket_empty").remove();
            }

        };

        var delete_product = function (index) {
            countGoods--;
            amount -= parseFloat(cardItems[index].priceOne);
            cardItems.splice(index, 1);
            refresh();
            if (cardItems.length == 0) {
                basket_area.append("<p class = 'basket_empty'>Корзина пуста</p>");
            }
        };

        var refresh = function () {
            basket_area.empty();
            $(".price span").empty(); //Очищаем содержимое контейнера
            $(".price span").text(+amount.toFixed(2));
            renderItemList();
        };

        var addNotarea = $("<ul/>", {
            class: "addNot_list"
        });

        var addNotItems = [];

        var addNot = function (id, title) {
            var id = id;
            var title = title;

            var addNotItem = {
                "id": id,
                "title": title
            }

            var addNotarea_item = $("<li/>", {
                class: "addNot_list_item",
                id: "added-" + id
            });

            var addedProduct = $("<div/>", {
                class: "addedProduct"
            });

            var addedProductText = $("<p/>", {
                class: "addedProductText",
                id: "added-text-" + id,
                text: "Added: " + title
            });

            addNotItems.push(addNotItem);

            addedProduct.append(addedProductText);
            addNotarea_item.append(addedProduct);
            addNotarea.append(addNotarea_item);
            $("body").append(addNotarea);
        };


        ///////////////////////////////////////


        $(".rmenu_content_item_btn").on("click", function () {
            var product_id = parseInt($(this).attr('data-id'));
            var title;
            var price;

            for (var key of basketCard.basket) {
                if (parseInt(key.id) == product_id) {
                    title = key.title;
                    price = parseFloat(key.price);
                }
            }
            add(product_id, title, price);
        });

        $('.basket_item_area').on('click', '.basket_item_delete', function (e) {
            e.preventDefault();
            delete_product(+$(this).data("index"));
        });

    } else {
        console.log("status is not 4");
    }
}

////////////////////////////////////////////////

$(".contact_content_form_input_table").on("click", function () {
    $(".choose_table").fadeToggle(700);
});

var contact_input_area = $(".contact_content_form_inputArea");

$('#contact_content_form_type option').on("click", function () {
    $('#contact_content_form_type option').each(function () {
        if ($(this).prop('selected') == true) {
            if ($(this).text() == "Delivery") {
                $(".contact_content_form_item_table").remove();
                var new_input = $("<div/>", {
                    class: "contact_content_form_item contact_content_form_item_delivery",
                    html: "<label for='contact_content_form_address'>Address</label><input type='tel' id='contact_content_form_address' class='contact_content_form_input contact_content_form_name' placeholder=' delivery address '>"
                });
            } else if ($(this).text() == "Table") {
                $(".contact_content_form_item_delivery").remove();
                var new_input = $("<div/>", {
                    class: "contact_content_form_item contact_content_form_item_table",
                    html: "<label for='contact_content_form_table'>Table</label><select type='text' id='contact_content_form_table' class='contact_content_form_input contact_content_form_input_table'> <option>Table 1</option><option>Table 2</option><option>Table 3</option><option>Table 4</option><option>Table 5</option><option>Table 6</option> </select><img src='./img/restaurant-furniture.jpg' alt = 'PHOTO' id = 'res_table' class='choose_table'>"
                });
                $(".contact_content_form_input_table").on("click", function () {
                    $(".choose_table").fadeToggle(700);
                });
            }
            contact_input_area.append(new_input);
        }
    });
});

    </script>
</body>

</html>
